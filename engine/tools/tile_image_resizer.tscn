[gd_scene load_steps=20 format=3 uid="uid://2nv20wrjn4i0"]

[ext_resource type="PackedScene" uid="uid://qmfgn6jgqh78" path="res://engine/resources/ui/image_resizer_base.tscn" id="1_h0atp"]
[ext_resource type="Script" uid="uid://cnijih42f20f7" path="res://engine/scripts/tool/TileImageResizer.cs" id="2_h0atp"]
[ext_resource type="Script" uid="uid://nx7ujwsc2ej2" path="res://engine/scripts/tool/TileImageResizerFormatPart.cs" id="3_jsnoi"]
[ext_resource type="Script" uid="uid://cf1sc3v3ksxst" path="res://engine/scripts/tool/TileImageResizerFormat.cs" id="3_qx14l"]
[ext_resource type="Texture2D" uid="uid://cr5meevp5vyhn" path="res://engine/tools/tile_image_resizer_reference_source_tileset.png" id="5_wj16g"]

[sub_resource type="ViewportTexture" id="ViewportTexture_db4rr"]
viewport_path = NodePath("Frame Buffer")

[sub_resource type="Resource" id="Resource_6p82p"]
script = ExtResource("3_jsnoi")
Comment = "平直块 (0,0) - (3,3)"
RemapTable = Array[Vector4i]([Vector4i(0, 0, 1, 1), Vector4i(1, 0, 2, 1), Vector4i(2, 0, 3, 1), Vector4i(0, 1, 1, 2), Vector4i(1, 1, 2, 2), Vector4i(2, 1, 3, 2), Vector4i(0, 2, 1, 3), Vector4i(1, 2, 2, 3), Vector4i(2, 2, 3, 3), Vector4i(3, 0, 5, 1), Vector4i(3, 1, 5, 2), Vector4i(3, 2, 5, 3), Vector4i(0, 3, 1, 5), Vector4i(1, 3, 2, 5), Vector4i(2, 3, 3, 5), Vector4i(3, 3, 5, 5)])
metadata/_custom_type_script = "uid://nx7ujwsc2ej2"

[sub_resource type="Resource" id="Resource_nleqe"]
script = ExtResource("3_jsnoi")
Comment = "45°斜坡（左半）"
RemapTable = Array[Vector4i]([Vector4i(0, 4, 5, 7), Vector4i(0, 5, 5, 8), Vector4i(0, 6, 5, 9), Vector4i(0, 7, 5, 10), Vector4i(0, 4, 6, 6), Vector4i(0, 5, 6, 7), Vector4i(1, 1, 6, 8), Vector4i(1, 1, 6, 9), Vector4i(0, 6, 6, 10), Vector4i(0, 7, 6, 11), Vector4i(0, 4, 7, 5), Vector4i(0, 5, 7, 6), Vector4i(1, 1, 7, 7), Vector4i(1, 1, 7, 8), Vector4i(1, 1, 7, 9), Vector4i(1, 1, 7, 10), Vector4i(0, 6, 7, 11), Vector4i(0, 7, 7, 12)])
metadata/_custom_type_script = "uid://nx7ujwsc2ej2"

[sub_resource type="Resource" id="Resource_nm505"]
script = ExtResource("3_jsnoi")
Comment = "45°斜坡（右半）"
RemapTable = Array[Vector4i]([Vector4i(1, 4, 8, 5), Vector4i(1, 5, 8, 6), Vector4i(1, 1, 8, 7), Vector4i(1, 1, 8, 8), Vector4i(1, 1, 8, 9), Vector4i(1, 1, 8, 10), Vector4i(1, 6, 8, 11), Vector4i(1, 7, 8, 12), Vector4i(1, 4, 9, 6), Vector4i(1, 5, 9, 7), Vector4i(1, 1, 9, 8), Vector4i(1, 1, 9, 9), Vector4i(1, 6, 9, 10), Vector4i(1, 7, 9, 11), Vector4i(1, 4, 10, 7), Vector4i(1, 5, 10, 8), Vector4i(1, 6, 10, 9), Vector4i(1, 7, 10, 10)])
metadata/_custom_type_script = "uid://nx7ujwsc2ej2"

[sub_resource type="Resource" id="Resource_ygp8f"]
script = ExtResource("3_jsnoi")
Comment = "1:2斜坡（左半）"
RemapTable = Array[Vector4i]([Vector4i(2, 4, 10, 2), Vector4i(3, 4, 11, 2), Vector4i(2, 5, 10, 3), Vector4i(3, 5, 11, 3), Vector4i(2, 6, 10, 4), Vector4i(3, 6, 11, 4), Vector4i(2, 7, 10, 5), Vector4i(3, 7, 11, 5), Vector4i(2, 4, 12, 1), Vector4i(3, 4, 13, 1), Vector4i(2, 5, 12, 2), Vector4i(3, 5, 13, 2), Vector4i(1, 1, 12, 3), Vector4i(1, 1, 13, 3), Vector4i(1, 1, 12, 4), Vector4i(1, 1, 13, 4), Vector4i(2, 6, 12, 5), Vector4i(3, 6, 13, 5), Vector4i(2, 7, 12, 6), Vector4i(3, 7, 13, 6)])
metadata/_custom_type_script = "uid://nx7ujwsc2ej2"

[sub_resource type="Resource" id="Resource_thwm5"]
script = ExtResource("3_jsnoi")
Comment = "1:2斜坡（右半）"
RemapTable = Array[Vector4i]([Vector4i(4, 4, 14, 1), Vector4i(5, 4, 15, 1), Vector4i(4, 5, 14, 2), Vector4i(5, 5, 15, 2), Vector4i(1, 1, 14, 3), Vector4i(1, 1, 15, 3), Vector4i(1, 1, 14, 4), Vector4i(1, 1, 15, 4), Vector4i(4, 6, 14, 5), Vector4i(5, 6, 15, 5), Vector4i(4, 7, 14, 6), Vector4i(5, 7, 15, 6), Vector4i(4, 4, 16, 2), Vector4i(5, 4, 17, 2), Vector4i(4, 5, 16, 3), Vector4i(5, 5, 17, 3), Vector4i(4, 6, 16, 4), Vector4i(5, 6, 17, 4), Vector4i(4, 7, 16, 5), Vector4i(5, 7, 17, 5)])
metadata/_custom_type_script = "uid://nx7ujwsc2ej2"

[sub_resource type="Resource" id="Resource_5wx2b"]
resource_local_to_scene = true
script = ExtResource("3_jsnoi")
Comment = "转角"
RemapTable = Array[Vector4i]([Vector4i(4, 0, 13, 11), Vector4i(5, 0, 14, 11), Vector4i(6, 0, 15, 11), Vector4i(4, 1, 13, 10), Vector4i(5, 1, 14, 10), Vector4i(6, 1, 15, 10), Vector4i(4, 2, 13, 9), Vector4i(5, 2, 14, 9), Vector4i(6, 2, 15, 9), Vector4i(1, 1, 12, 8), Vector4i(1, 1, 13, 8), Vector4i(1, 1, 14, 8), Vector4i(1, 1, 15, 8), Vector4i(1, 1, 16, 8), Vector4i(1, 1, 16, 9), Vector4i(1, 1, 16, 10), Vector4i(1, 1, 16, 11), Vector4i(1, 1, 16, 12), Vector4i(1, 1, 15, 12), Vector4i(1, 1, 14, 12), Vector4i(1, 1, 13, 12), Vector4i(1, 1, 12, 12), Vector4i(1, 1, 12, 11), Vector4i(1, 1, 12, 10), Vector4i(1, 1, 12, 9)])
metadata/_custom_type_script = "uid://nx7ujwsc2ej2"

[sub_resource type="Resource" id="Resource_wj16g"]
script = ExtResource("3_qx14l")
Parts = Array[Object]([SubResource("Resource_6p82p"), SubResource("Resource_nleqe"), SubResource("Resource_nm505"), SubResource("Resource_ygp8f"), SubResource("Resource_thwm5"), SubResource("Resource_5wx2b")])
metadata/_custom_type_script = "uid://cf1sc3v3ksxst"

[sub_resource type="Resource" id="Resource_sp636"]
script = ExtResource("3_jsnoi")
Comment = "平直块 (0,0) - (3,3)"
RemapTable = Array[Vector4i]([Vector4i(1, 1, 0, 0), Vector4i(2, 1, 1, 0), Vector4i(3, 1, 2, 0), Vector4i(1, 2, 0, 1), Vector4i(2, 2, 1, 1), Vector4i(3, 2, 2, 1), Vector4i(1, 3, 0, 2), Vector4i(2, 3, 1, 2), Vector4i(3, 3, 2, 2), Vector4i(5, 1, 3, 0), Vector4i(5, 2, 3, 1), Vector4i(5, 3, 3, 2), Vector4i(1, 5, 0, 3), Vector4i(2, 5, 1, 3), Vector4i(3, 5, 2, 3), Vector4i(5, 5, 3, 3)])
metadata/_custom_type_script = "uid://nx7ujwsc2ej2"

[sub_resource type="Resource" id="Resource_0us5j"]
script = ExtResource("3_jsnoi")
Comment = "45°斜坡"
RemapTable = Array[Vector4i]([Vector4i(6, 6, 0, 4), Vector4i(6, 7, 0, 5), Vector4i(6, 10, 0, 6), Vector4i(6, 11, 0, 7), Vector4i(9, 6, 1, 4), Vector4i(9, 7, 1, 5), Vector4i(9, 10, 1, 6), Vector4i(9, 11, 1, 7)])
metadata/_custom_type_script = "uid://nx7ujwsc2ej2"

[sub_resource type="Resource" id="Resource_rwxjg"]
script = ExtResource("3_jsnoi")
Comment = "1:2斜坡"
RemapTable = Array[Vector4i]([Vector4i(11, 2, 3, 4), Vector4i(11, 3, 3, 5), Vector4i(11, 4, 3, 6), Vector4i(11, 5, 3, 7), Vector4i(12, 1, 2, 4), Vector4i(12, 2, 2, 5), Vector4i(12, 5, 2, 6), Vector4i(12, 6, 2, 7), Vector4i(15, 1, 5, 4), Vector4i(15, 2, 5, 5), Vector4i(15, 5, 5, 6), Vector4i(15, 6, 5, 7), Vector4i(16, 2, 4, 4), Vector4i(16, 3, 4, 5), Vector4i(16, 4, 4, 6), Vector4i(16, 5, 4, 7)])
metadata/_custom_type_script = "uid://nx7ujwsc2ej2"

[sub_resource type="Resource" id="Resource_p2wx1"]
script = ExtResource("3_jsnoi")
Comment = "转角"
RemapTable = Array[Vector4i]([Vector4i(13, 11, 4, 0), Vector4i(14, 11, 5, 0), Vector4i(15, 11, 6, 0), Vector4i(13, 12, 4, 1), Vector4i(14, 12, 5, 1), Vector4i(15, 12, 6, 1), Vector4i(13, 13, 4, 2), Vector4i(14, 13, 5, 2), Vector4i(15, 13, 6, 2)])
metadata/_custom_type_script = "uid://nx7ujwsc2ej2"

[sub_resource type="Resource" id="Resource_jsnoi"]
script = ExtResource("3_qx14l")
Parts = Array[Object]([SubResource("Resource_sp636"), SubResource("Resource_0us5j"), SubResource("Resource_rwxjg"), SubResource("Resource_p2wx1")])
metadata/_custom_type_script = "uid://cf1sc3v3ksxst"

[sub_resource type="ViewportTexture" id="ViewportTexture_tw202"]
viewport_path = NodePath("Frame Buffer/XBRz Viewport/16x Pixelized Content")

[node name="Tile Image Resizer" instance=ExtResource("1_h0atp")]
texture = SubResource("ViewportTexture_db4rr")
script = ExtResource("2_h0atp")
PrepareFormat = SubResource("Resource_wj16g")
ExportFormat = SubResource("Resource_jsnoi")

[node name="XBRz Viewport" parent="Frame Buffer" index="0"]
texture = SubResource("ViewportTexture_tw202")

[node name="Sprite" parent="Frame Buffer/XBRz Viewport/16x Pixelized Content" index="0"]
position = Vector2(160, 120)
texture = ExtResource("5_wj16g")
centered = true
